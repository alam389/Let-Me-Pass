<header>
  <h1>Let Me Pass</h1>
  <div class="header-controls">
    <div class="search-container">
      <div class="custom-search">
        <input type="text" placeholder="Search passwords...">
        <i class="material-icons">search</i>
      </div>
    </div>
    <button mat-raised-button color="accent"  (click)="logout()" routerLink="/login">Logout</button>
  </div>
</header>

<div class="main-container">
  <mat-card class="password-card">
    <mat-card-content>
     <button mat-button (click)="goback()" class="back-button">
        <i class="material-icons">arrow_back</i>
      </button>
    <h2>  
      <img [src]="getFaviconUrl(passwordData.siteurl)" alt="Icon" class="favicon">

      {{ decode(passwordData.siteurl) }}
    </h2>
      <form [formGroup]="passwordForm" class="password-form">
        <mat-form-field appearance="fill">
          <mat-label>Site Name</mat-label>
          <input matInput formControlName="sitename" readonly>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Site URL</mat-label>
          <input matInput formControlName="siteurl" readonly>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>
            Username
           
          </mat-label>
          <input matInput formControlName="username" readonly>
          <button  
            mat-icon-button 
            class="copy-button"
            matSuffix
            type="button"
            (click)="copyToClipboard(passwordForm.get('username')?.value)"
            aria-label="Copy Username">
          <mat-icon>content_copy</mat-icon>
        </button>
        </mat-form-field>
        <mat-form-field appearance="fill" class="password-field">
          <mat-label>Password</mat-label>
          <input 
            matInput 
            [type]="hidePassword ? 'password' : 'text'" 
            formControlName="password" 
            readonly>
            
          <button 
            mat-icon-button 
            matSuffix 
            (click)="togglePasswordVisibility()" 
            type="button">
            <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>

          <button  
            mat-icon-button 
            class="copy-button"
            matSuffix
            (click)="copyToClipboard(passwordForm.get('password')?.value)"
            type="button"
            aria-label="Copy Password">
            <mat-icon>content_copy</mat-icon>
          </button>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Notes</mat-label>
          <textarea matInput formControlName="notes" readonly></textarea>
        </mat-form-field>
      </form>
    </mat-card-content>
    <mat-card-actions>
      <div class="buttons-container">
        
        <button
          mat-button          
          color="primary"
          type="button"
          (click)="enableEdit($event)"
        >
          Edit
        </button>
    
      
        </div>
      <button mat-button (click)="delete()" color="warn">Delete</button>
    </mat-card-actions>
  </mat-card>
</div>